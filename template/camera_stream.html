<!DOCTYPE html>
<html>
<head>
    <title>IP Camera Stream</title>
</head>
<body>
<h1>Live Camera Feed</h1>
<img id="video-frame" width="640" height="480" />

<script>
const ws = new WebSocket("ws://localhost:8000/ws/camera-streaming/"); // your Django host

const img = document.getElementById("video-frame");

ws.onopen = () => console.log("Connected to WebSocket");
ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    if(data.frame){
        img.src = "data:image/jpeg;base64," + data.frame;
    } else if(data.error){
        console.error(data.error);
    }
};
ws.onclose = () => console.log("WebSocket closed");
</script>
</body>
</html>
